<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: librext-spec-builder/src/build.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: librext-spec-builder/src/build.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file LibRext Spec Builder
 */

"use strict"

import { config as coreConfig } from 'librext-core'

import fontFamiliesData from './data/font-families.json' with { type: 'json' };
import buildThemeLibRext from './spec-librext.js'
import { buildTypeScale, buildTypeScaleData } from './type-scale.js'
import { buildGreyscaleProps, buildThemeProps } from './spec-theme.js'

/**
 * Custom Librext UI Data (doesn't conform to Theme-UI spec)
 * @namespace libRextSpecBuilder
 */
const buildSpec = (uiSpec, config = coreConfig) => {

    /* ----------------------------------------
     * Fonts
     * ------------------------------------- */

    let libRextFonts = {}
    for (const fontRole in config.fonts) {
        const fontKey = config.fonts[fontRole]
        const fontFamValue = fontFamiliesData.fontFamilies[fontKey]
        libRextFonts[fontRole] = fontFamValue
    }
    console.log('[LibRext Spec Builder] config.fonts', config.fonts)
    console.log('[LibRext Spec Builder] libRextFonts', libRextFonts)

    /* ----------------------------------------
     * Theme
     * ------------------------------------- */

    // Format theme data from config
    const configThemeProps = buildThemeProps(config.themeColours)

    // Remove existing theme colours in default spec
    let outColours = {};
    for (const colRole in uiSpec.colors) {
        if (!colRole.startsWith('theme')) {
            outColours[colRole] = uiSpec.colors[colRole]
        }
    }

    // Replace defualt spec theme with config values
    for (const colRole in configThemeProps) {
        outColours[colRole] = configThemeProps[colRole]
    }

    /* ----------------------------------------
     * UI Spec overrides
     * ------------------------------------- */

    const libRextTypeScale = buildTypeScale(config)
    let newSpec = {
        ...uiSpec,
        colors: outColours,
        fonts: libRextFonts,
        fontSizes: libRextTypeScale
    }

    /* ----------------------------------------
     * LibRext Spec overrides
     * ------------------------------------- */

    const libRextTypeScaleData = buildTypeScaleData(config)
    const specLibRext = buildThemeLibRext(config)

    const newLibRextSpec = {
        ...specLibRext.libRextData,
        fontSizes: libRextTypeScaleData
    }

    /* ----------------------------------------
     * Output Spec
     * ------------------------------------- */

    const outSpec = {
        ...newSpec,
        libRextData: newLibRextSpec,
    }
    console.log('[LibRext Spec Builder] outSpec', outSpec)
    return outSpec
}

export default buildSpec;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="libRextCore.html">libRextCore</a></li><li><a href="libRextCssBuilder.html">libRextCssBuilder</a></li><li><a href="libRextDocsBuilder.html">libRextDocsBuilder</a></li><li><a href="libRextFontBuilder.html">libRextFontBuilder</a></li><li><a href="libRextSite.html">libRextSite</a></li><li><a href="libRextSpecBuilder.html">libRextSpecBuilder</a></li><li><a href="libRextUiSpec.html">libRextUiSpec</a></li></ul><h3>Global</h3><ul><li><a href="global.html#build">build</a></li><li><a href="global.html#buildHtmlStylesheets">buildHtmlStylesheets</a></li><li><a href="global.html#codeComment">codeComment</a></li><li><a href="global.html#docStylesheets">docStylesheets</a></li><li><a href="global.html#fontCategories">fontCategories</a></li><li><a href="global.html#fontData">fontData</a></li><li><a href="global.html#fontRoles">fontRoles</a></li><li><a href="global.html#fontVariants">fontVariants</a></li><li><a href="global.html#fontWeights">fontWeights</a></li><li><a href="global.html#libRextData">libRextData</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Thu Dec 11 2025 10:51:17 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
